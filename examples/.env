# =============================================================================
# g0efilter Configuration
# =============================================================================

# --- Core Settings ---
LOG_LEVEL=INFO                    # TRACE, DEBUG, INFO, WARN, ERROR
HOSTNAME=host-01             # Identifies this instance in logs/dashboard
FILTER_MODE=https                 # "https" (TLS SNI/HTTP Host) or "dns" (DNS filtering)

# --- Filter Ports ---
HTTP_PORT=8080                    # Local HTTP proxy port
HTTPS_PORT=8443                   # Local HTTPS proxy port
# DNS_PORT=53                     # DNS listen port (only used in dns mode)

# --- Policy Configuration ---
POLICY_PATH=/app/policy.yaml      # Path to policy file (supports live reloading)

# Alternative: specify allowlist directly via environment variables
# (takes precedence over policy file, but does NOT support live reloading)
# ALLOWLIST_IPS=1.1.1.1,8.8.8.8,192.168.0.0/16
# ALLOWLIST_DOMAINS=github.com,*.alpinelinux.org,*.cloudflare.com

# --- DNS Settings (dns mode only) ---
# DNS_UPSTREAMS=127.0.0.11:53     # Upstream DNS servers (comma-separated)

# --- Dashboard Integration ---
# DASHBOARD_HOST=http://g0efilter-dashboard:8081  # Dashboard URL for log shipping
# DASHBOARD_API_KEY=your-secure-api-key-here      # Must match dashboard API_KEY
# DASHBOARD_QUEUE_SIZE=1024       # Buffer size before dropping logs (default: 1024)
# DASHBOARD_START_DELAY=5s        # Delay before starting log shipping (default: 5s)

# --- Remote Unblock Feature ---
# WARNING: Only enable with proper auth middleware protecting the dashboard!
# ENABLE_REMOTE_UNBLOCK=false     # Enable polling dashboard for unblock requests (default: false)
# UNBLOCK_POLL_INTERVAL=10s       # How often to poll for unblock requests

# --- Notifications (Gotify) ---
# NOTIFICATION_HOST=https://gotify.example.com
# NOTIFICATION_KEY=your-gotify-app-key
# NOTIFICATION_BACKOFF_SECONDS=60              # Rate limit for duplicate alerts
# NOTIFICATION_IGNORE_DOMAINS=*.google.com     # Domains to ignore (wildcards supported)

# --- Logging ---
# LOG_FILE=/data/output.log       # Persistent log file (requires volume mount)

# --- Advanced: Netfilter Tuning ---
# NFLOG_BUFSIZE=96                # Netfilter log buffer size
# NFLOG_QTHRESH=50                # Netfilter log queue threshold